---
title: "Package Management in R"
subtitle: ""
author: 
  - "Isabella VelÃ¡squez, Bill & Melinda Gates Foundation"
  - "Mike Garcia, ProCogia"
date: "May 7th, 2020"
output:
  xaringan::moon_reader:
    lib_dir: libs
    nature:
      highlightStyle: github
      highlightLines: true
      countIncrementalSlides: false
---

```{r, echo=FALSE}
# devtools::install_github("hadley/emo")
library(emo)
library(blogdown)
```

---
class: inverse, center, middle

#Welcome/Intro/Overview/Background

---

---
class: inverse, center, middle

# Upgrading R in the time of coronavirus

```{r, echo = FALSE, out.height = 500, fig.align='center'}
knitr::include_graphics('https://media1.tenor.com/images/4abc0a93a957de4c1db543ec3f4834a7/tenor.gif?itemid=13633421')
```

---
# R version 4.0.0 is out! `r emo::ji("evergreen_tree")`

## Whatâ€™s new?

* `list2DF`
* `sort.list` for non-atomic objects
* New color palettes
* And a lot of other stuff!

```{r, echo = FALSE, out.height = 250, fig.align='center'}
knitr::include_graphics('img/cb.jpg')
```
--
...
--
and, `stringsAsFactors = FALSE`
---

# How do you feel about upgrading R?

Self-identify and share something you may be worried about in the chat:

* `r emo::ji("sunglasses")` Not worried 
* `r emo::ji("slightly_smiling_face")` Not too worried 
* `r emo::ji("confused")` A little worried
* `r emo::ji("fearful")` Very worried
* `r emo::ji("dizzy_face")` Confused about why anyone is worried

---
# What does it mean to upgrade a major version of R?

```{r, echo = FALSE, out.height = 250, fig.align='center'}
knitr::include_graphics('https://giffiles.alphacoders.com/168/168275.gif')
```
--

* For some - apprehension!
* For others - opportunity!

---

# Upgrade R // Install As You Go

You can "start fresh" with no packages installed when you upgrade R.

* As you write scripts that need packages, then you can install them as you go.
* Another option is to use {pacman}, that installs packages that are not already installed but mentioned in code.
* For previously written scripts, RStudio provides a helpful message if it detects a package that is not installed.

```{r, echo=FALSE}
knitr::include_graphics('img/brms.png')
```

---
# Upgrade R // Reinstall All Packages

You may want to be able to start working with R as soon as you update.

## Reinstall After Updating

<blockquote class="twitter-tweet"><p lang="en" dir="ltr">Dread of reinstalling all your <a href="https://twitter.com/hashtag/rstats?src=hash&amp;ref_src=twsrc%5Etfw">#rstats</a> packages keeping you from updating to R 4.0.0?ðŸ’€Don&#39;t despair! This script will reinstall them after you update! Code here: <a href="https://t.co/5YnqmgqyUG">https://t.co/5YnqmgqyUG</a> <a href="https://t.co/VSivonPyWJ">pic.twitter.com/VSivonPyWJ</a></p>&mdash; Isabella VelÃ¡squez (@ivelasq3) <a href="https://twitter.com/ivelasq3/status/1253766376331902979?ref_src=twsrc%5Etfw">April 24, 2020</a></blockquote> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>

## Other Options

* https://mobile.twitter.com/dailyzad/status/1253506170372980737
* Formal packages: {installr}, {yamlpack}...

---
# Upgrade R // Keep Old Packages

If you want to keep the previous versions of your package but upgrade R, you can bring over the old versions.

```{r, echo=FALSE}
knitr::include_graphics('img/stringasfactors.jpg')
```

---
# Think of your Dependencies

```{r, echo=FALSE}
knitr::include_graphics('https://im2.ezgif.com/tmp/ezgif-2-728a809f4f41.gif')
```

Source: https://twitter.com/andrewheiss/status/1021944992351186944?s=21

---
# Do Not Upgrade R

<blockquote class="twitter-tweet"><p lang="en" dir="ltr">Yeah, I&#39;m just gonna act like <a href="https://twitter.com/hashtag/rstats?src=hash&amp;ref_src=twsrc%5Etfw">#rstats</a> 4.0 doesn&#39;t exist until I finish these papers. <br>MRAN January snapshot continues! <a href="https://t.co/RrFCR86kcV">pic.twitter.com/RrFCR86kcV</a></p>&mdash; Chase Clark (@ChasingMicrobes) <a href="https://twitter.com/ChasingMicrobes/status/1253036167941021696?ref_src=twsrc%5Etfw">April 22, 2020</a></blockquote> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>

```{r, echo = FALSE, out.height = 250, fig.align='center'}
knitr::include_graphics('https://media.giphy.com/media/IdmfEtnMWPzOg/200.gif')
```

---
# Do Not Upgrade R

Even if youâ€™d rather wait for R v4.1.0, there are a few things you can do:

* Test it out before you upgrade
* Make it so you can switch between R versions: use RSwitch on macOS by @hrbrmstr

```{r, echo = FALSE, out.height = 250, fig.align='center'}
knitr::include_graphics('https://media0.giphy.com/media/xUA7aUNw61j9Vdzs0U/giphy.gif')
```

---
. Considerations

* How do you code?
* How feasily can you refind your non-CRAN packages?
* How ragile in your code?
* WDo you want a 'fresh start'?
* Will your packages work with R 4.0.0?
* hat do your dependencies look like?
* How fast is your internet?
* How quick is your deadline?

---

# Other Options

* packrat (old RStudio package management solution)
* RStudio Package Manager
* Docker (rocker)
* Conda
* and....
--

* renv

---
class: inverse, center, middle

# Package management in projects

```{r, echo=FALSE, out.height=300}
knitr::include_graphics('img/renv-hex.svg')
```

---
# Mike's content



---
class: inverse, center, middle

# Conclusion/Questions?

---
# References

## What's New

* [Four New Useful Features in R 4.0.0](https://www.r-bloggers.com/4-for-4-0-0-four-useful-new-features-in-r-4-0-0/)
* [R 4.0.0 Now Available](https://www.r-bloggers.com/r-4-0-0-now-available-and-a-look-back-at-rs-history/
)
